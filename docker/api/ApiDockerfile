# syntax=docker/dockerfile:1

FROM ubuntu:23.04 AS jar
RUN apt-get update
RUN apt-get install openjdk8-jdk
RUN apt-get maven

COPY ./bmedia_api /bmedia_api
WORKDIR /bmedia_api
RUN mvn package

FROM adoptopenjdk/openjdk8
COPY --from=jar /bmedia_api/target/bmedia_api-1.0-SNAPSHOT-jar-with-dependencies.jar /bmedia_api.jar
CMD ["java", "-jar", "/bmedia_api.jar"]